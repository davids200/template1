CREATE TABLE groups (
  id VARCHAR(50) PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  country VARCHAR(50) NOT NULL,
  user_id VARCHAR(50) NOT NULL,
  created DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  CONSTRAINT uniq_name_user UNIQUE (name, user_id),
  CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE contacts (
  id VARCHAR(50) PRIMARY KEY,
  phone VARCHAR(255) NOT NULL,
  name VARCHAR(255), 
  group_id VARCHAR(255) NOT NULL,
  user_id VARCHAR(50) NOT NULL,
  created DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  CONSTRAINT uniq_name_user UNIQUE (phone, group_id),
  CONSTRAINT fk_group FOREIGN KEY (group_id) REFERENCES groups(id),
  CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(id)
);



CREATE TABLE contacts (
  id CHAR(36) NOT NULL,
  name VARCHAR(255) NOT NULL,
  phone VARCHAR(20) NOT NULL,
  group VARCHAR(20) NOT NULL,
  user_id INT NOT NULL,
  country VARCHAR(255) NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);


